<!--Formatting html files against Google standards is tough lol-->
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dev Dots - GaTE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css"> 
</head>
<body class="devlog-page">
  <h1 id="blog-headline">Dev Dots on GaTE</h1>
  <p><i>i.e. the developer's thoughts on Gate To Exodus...</i></p>
  <br>
  <aside id="toc-sidebar">
    <a href="index.html" class="outside-hyperlink">Return to GaTE</a>
  </aside>
  <div id="blog-content">
    <div id="loading-text">Loading transmission...</div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    const blogContainer = document.getElementById('blog-content');
    const tocSidebar = document.getElementById('toc-sidebar');
    const loadingText = document.getElementById('loading-text');
      // We wrap our logic in an "async" function so we can use the "await" command
      async function loadAllLogs() {
        // 1. Fetch the manifest and wait for it to arrive
        const manifestResponse = await fetch('logs/manifest.json');
        // 2. Translate the JSON text into an actual JavaScript Array
        const fileList = await manifestResponse.json();
        // Clear loading text
        if (loadingText) loadingText.remove();
        // 3. Clear the "Loading transmission..." text
        blogContainer.innerHTML = '';
        // 4. Loop through every file in the list
        for (const fileName of fileList) {
          // Fetch the specific markdown file
          const postResponse = await fetch(`logs/${fileName}`);
          const rawText = await postResponse.text();
          // Create a temporary invisible box (a div) for this specific post
          const postBox = document.createElement('div');
          postBox.id = fileName;
          // Translate the Markdown to HTML and put it in the box
          postBox.innerHTML = marked.parse(rawText);      
          blogContainer.appendChild(postBox);
          // Add a cool horizontal line at the bottom of the post to separate it from the next one
          postBox.innerHTML += '<hr style="border-color: #333; margin: 40px 0;">';
          // Create table of contents link for the sidebar
          const tocLink = document.createElement('a');
          tocLink.href = `#${fileName}` ; // Creates the anchor link: href="#first-post.md"
          // Clean up the text so it says "first-post" instead of "first-post.md"
          tocLink.innerText = fileName.replace('.md', '').replace('-', ' ')
          tocLink.style.textTransform = 'capitalize'; // Capitalizes the words
          // Append link to the sidebar container
          tocSidebar.appendChild(tocLink);
        }
      }
      // Execute the function!
      loadAllLogs();
    </script>
</body>
</html>